{"version":3,"names":["async","getStatusData","statusUrl","response","fetch","status","json","overview","title","icon","_a","message","_b","_c","_d","buildHistory","history","events","Object","create","tz","Intl","DateTimeFormat","resolvedOptions","timeZone","dateFormat","year","month","day","timeFormat","hour","minute","timeZoneName","eventStamp","eventDate","Date","format","push","timestamp","details","getStatusDisplay"],"sources":["./src/utils/status.ts"],"sourcesContent":["export async function getStatusData(statusUrl: string) {\n    const response = await fetch(statusUrl);\n    const status = await response.json();\n    status.overview.title = \"\"\n    switch (status.overview.status) {\n        case \"normal\": {\n            status.overview.title = \"All Good. Systems are running as expected!\"\n            status.overview.icon = \"success\";\n            status.overview.message ||= \"There are no known outages for ArcGIS Hub. Notice Something?\"\n            break;\n        }\n        case \"degraded\": {\n          status.overview.title = \"Uh oh. You might be experiencing issues.\"\n          status.overview.icon = \"warning\";\n          status.overview.message ||= \"ArcGIS Hub services are having issues, we are working to fix them.\"\n          break;\n        }\n        case \"down\": {\n          status.overview.title = \"Oh no. ArcGIS Hub is not available.\";\n          status.overview.icon = \"dange\";\n          status.overview.message ||= \"We currently have a service problem, sorry for the inconvenience as we develop a solution.\"\n          break;\n        }\n        case \"maintenance\": {\n          status.overview.title = \"Heads up, we are performing some maintenance.\";\n          status.overview.icon = \"info\";\n          status.overview.message ||= \"You may experience a temporary outage while maintenance is performed.\"\n          break;\n        }\n      }    \n    return status;\n\n    //   .then((response) => {\n    //     response.json().then((status) => {\n    //       return(status);\n    //     }).catch((error) => {\n    //       console.error(\"Error parsing status.json\", error);\n    //     })\n    //   })\n    //   .catch((error) => {\n    //     console.error(\"Error getting status.json\", error);\n\n    //     return ({\n    //         \"status\": \"normal\",\n    //         \"title\": \"All Good. Systems are running as expected!\",\n    //         \"message\": \"There are no known outages for ArcGIS Hub. Notice Something?\"\n    //     })\n        \n    //   });\n}\n\nexport function buildHistory(history) {\n    var events = Object.create(null);\n    const tz = Intl.DateTimeFormat().resolvedOptions().timeZone;\n    var dateFormat = new Intl.DateTimeFormat('en', { year: 'numeric', month: 'long', day: '2-digit' })\n    var timeFormat = new Intl.DateTimeFormat('en', {\n        hour: 'numeric',\n        minute: 'numeric',\n        timeZone: tz,\n        timeZoneName: 'short'  })\n\n    // Aggregate events by day\n    for(let eventStamp in history) {\n        var eventDate = new Date(eventStamp)\n        var day = dateFormat.format(eventDate)\n        if (!events[day]) {\n        events[day] = [];\n        }\n        events[day].push({timestamp: timeFormat.format(eventDate), details: history[eventStamp]});\n    }\n\n    return events;\n}\n\nexport function getStatusDisplay(status: string, message: string = null) {\n    switch(status) {\n        case \"normal\": {\n            return {\n                icon: \"check-circle-f\",\n                message: message || \"All Good. Systems are running as expected!\"\n            };\n        }\n        case \"degraded\": {\n            return {\n                icon: \"exclamation-mark-triangle-f\",\n                message: message || \"ArcGIS Hub services are having issues, we are working to fix them.\"\n            };\n        }\n        case \"down\": {\n            return {\n                icon: \"x-circle-f\",\n                message: message || \"We currently have a service problem, sorry for the inconvenience as we develop a solution.\"\n            };\n        }\n        case \"maintenance\": {\n            return {\n                icon: \"exclamation-mark-triangle-f\",\n                message: message || \"Service under maintenance, degraded functionality\"\n            };\n        }\n        default: {\n            return {\n                icon: \"question-mark-circle-f\",\n                message: message || \"Unknown status\"\n            }\n        }\n\n    }\n}"],"mappings":"AAAOA,eAAeC,EAAcC,G,YAChC,MAAMC,QAAiBC,MAAMF,GAC7B,MAAMG,QAAeF,EAASG,OAC9BD,EAAOE,SAASC,MAAQ,GACxB,OAAQH,EAAOE,SAASF,QACpB,IAAK,SAAU,CACXA,EAAOE,SAASC,MAAQ,6CACxBH,EAAOE,SAASE,KAAO,WACvBC,EAAAL,EAAOE,UAASI,UAAOD,EAAPC,QAAY,gEAC5B,K,CAEJ,IAAK,WAAY,CACfN,EAAOE,SAASC,MAAQ,2CACxBH,EAAOE,SAASE,KAAO,WACvBG,EAAAP,EAAOE,UAASI,UAAOC,EAAPD,QAAY,sEAC5B,K,CAEF,IAAK,OAAQ,CACXN,EAAOE,SAASC,MAAQ,sCACxBH,EAAOE,SAASE,KAAO,SACvBI,EAAAR,EAAOE,UAASI,UAAOE,EAAPF,QAAY,8FAC5B,K,CAEF,IAAK,cAAe,CAClBN,EAAOE,SAASC,MAAQ,gDACxBH,EAAOE,SAASE,KAAO,QACvBK,EAAAT,EAAOE,UAASI,UAAOG,EAAPH,QAAY,yEAC5B,K,EAGN,OAAON,CAmBX,C,SAEgBU,EAAaC,GACzB,IAAIC,EAASC,OAAOC,OAAO,MAC3B,MAAMC,EAAKC,KAAKC,iBAAiBC,kBAAkBC,SACnD,IAAIC,EAAa,IAAIJ,KAAKC,eAAe,KAAM,CAAEI,KAAM,UAAWC,MAAO,OAAQC,IAAK,YACtF,IAAIC,EAAa,IAAIR,KAAKC,eAAe,KAAM,CAC3CQ,KAAM,UACNC,OAAQ,UACRP,SAAUJ,EACVY,aAAc,UAGlB,IAAI,IAAIC,KAAcjB,EAAS,CAC3B,IAAIkB,EAAY,IAAIC,KAAKF,GACzB,IAAIL,EAAMH,EAAWW,OAAOF,GAC5B,IAAKjB,EAAOW,GAAM,CAClBX,EAAOW,GAAO,E,CAEdX,EAAOW,GAAKS,KAAK,CAACC,UAAWT,EAAWO,OAAOF,GAAYK,QAASvB,EAAQiB,I,CAGhF,OAAOhB,CACX,C,SAEgBuB,EAAiBnC,EAAgBM,EAAkB,MAC/D,OAAON,GACH,IAAK,SAAU,CACX,MAAO,CACHI,KAAM,iBACNE,QAASA,GAAW,6C,CAG5B,IAAK,WAAY,CACb,MAAO,CACHF,KAAM,8BACNE,QAASA,GAAW,qE,CAG5B,IAAK,OAAQ,CACT,MAAO,CACHF,KAAM,aACNE,QAASA,GAAW,6F,CAG5B,IAAK,cAAe,CAChB,MAAO,CACHF,KAAM,8BACNE,QAASA,GAAW,oD,CAG5B,QAAS,CACL,MAAO,CACHF,KAAM,yBACNE,QAASA,GAAW,iB,EAKpC,Q"}