{"version":3,"names":["hubChangelogCss","HubChangelog","async","response","fetch","this","changelogUrl","versions","json","console","debug","render","dateFormat","Intl","DateTimeFormat","year","month","day","h","Host","id","_a","map","version","priorDate","Date","timestamp","format","renderVersion","class","added","item","text","changed","fixed"],"sources":["./src/components/hub-changelog/hub-changelog.css?tag=hub-changelog&encapsulation=shadow","./src/components/hub-changelog/hub-changelog.tsx"],"sourcesContent":[":host {\n  display: block;\n}\n#status-history-list {\n  /* max-height: 0; */\n  overflow: hidden;\n  transition: max-height 0.2s ease-out;\n  transition: 0.4s;\n}\n\n.status-day::before {\n    position: absolute;\n    top: 0;\n    left: 19px;\n    display: block;\n    content: \"\";\n    width: 3px;\n    height: 100%;\n    background-color: #e6ebf1;\n}\n.status-day, #st2atus-history-list {\n    position: relative;\n    padding-top: 1.5rem;\n    padding-bottom: 1.5rem;\n    padding-left: 3rem;\n    margin-top: 0 !important;\n}\n.status-day .date::before {\n    position: absolute;\n    top: 1rem;\n    left: 0rem;\n    display: block;\n    content: \"\";\n    width: 2.5rem;\n    height: 2.5rem;\n    background: #24292e url(\"data:image/svg+xml;charset=utf8,%3Csvg width='14' height='16' viewBox='0 0 14 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M13 2H12V3.5C12 3.78 11.78 4 11.5 4H9.5C9.22 4 9 3.78 9 3.5V2H6V3.5C6 3.78 5.78 4 5.5 4H3.5C3.22 4 3 3.78 3 3.5V2H2C1.45 2 1 2.45 1 3V14C1 14.55 1.45 15 2 15H13C13.55 15 14 14.55 14 14V3C14 2.45 13.55 2 13 2ZM13 14H2V5H13V14ZM5 3H4V1H5V3ZM11 3H10V1H11V3ZM6 7H5V6H6V7ZM8 7H7V6H8V7ZM10 7H9V6H10V7ZM12 7H11V6H12V7ZM4 9H3V8H4V9ZM6 9H5V8H6V9ZM8 9H7V8H8V9ZM10 9H9V8H10V9ZM12 9H11V8H12V9ZM4 11H3V10H4V11ZM6 11H5V10H6V11ZM8 11H7V10H8V11ZM10 11H9V10H10V11ZM12 11H11V10H12V11ZM4 13H3V12H4V13ZM6 13H5V12H6V13ZM8 13H7V12H8V13ZM10 13H9V12H10V13Z' fill='%23fff'/%3E%3C/svg%3e\") no-repeat center center;\n    border-radius: 50%;\n}\n.status-event-none {\n  font-style: italic;\n  color: #666666;\n}","import { Component, Host, Prop, State, h } from '@stencil/core';\n\n@Component({\n  tag: 'hub-changelog',\n  styleUrl: 'hub-changelog.css',\n  shadow: true,\n})\nexport class HubChangelog {\n\n  /**\n   * Array of status change events\n   * \n   * {\n    \"versions\": {\n        \"2023-05-20T17:33:00Z\": {\n            \"added\": [\n                {\"text\": \"[Beta] Search results can now be filtered by source\"},\n                {\"text\": \"[Beta] Search results may now be filtered by license\"},\n                {\"text\": \"Updated translation strings\"}\n            ],\n            \"changed\": [\n                {\"text\": \"Updated translation strings\"}\n            ],\n            \"fixed\": [\n                {\"text\": \"Fixed popover positioning under side panel tab controls\"},\n                {\"text\": \"Fixed an issue where selecting a Discussions graphic on the map while one is already selected did not unselect the previous graphic\"},\n                {\"text\": \"Updated CSS selector to apply underlined links on 404 pages\"},\n                {\"text\": \"[Beta] Fixed issue where the experimental map filter stopped working on the new search route (/explore) after the route had switched to using the OGC API\"},\n                {\"text\": \"Removed pluralized strings for language support due to problematic translation support in browsers\"},\n                {\"text\": \"Fixed issue where selecting a dataset from the global nav search while on a dataset page would break the map\"}\n            ]\n        }\n    }\n}\n   */\n  @Prop() changelogUrl: any = './data/changelog.json';\n\n  @State() versions: any = null;\n\n  /**\n   * Number of days history to show\n   */\n  @Prop() days: number = 30;\n\n  @State() events: any = null;\n\n  async componentWillLoad() {\n    const response = await fetch(this.changelogUrl)\n    this.versions = await response.json();\n    console.debug(\"Versions\", this.versions);\n  }\n  render() {\n    var dateFormat = new Intl.DateTimeFormat('en', { year: 'numeric', month: 'long', day: '2-digit' })\n\n    return (\n      <Host>\n        <slot></slot>\n        <div id=\"status-history-list\">\n          {this.versions?.versions.map((version) => {\n            var priorDate = new Date(version.timestamp);\n            var day = dateFormat.format(priorDate);\n    \n            return this.renderVersion(day, version)\n          })}\n        </div>\n      </Host>\n    );\n  }\n\n  renderVersion(day, version) {\n\n    return <div class=\"status-day\">\n      <div class=\"date\">{day}</div>\n      <br/>\n      <div class=\"status-event\">\n        <div class=\"status-event-title\">Added</div>\n        <ul>\n          {version.added.map((item) => { return (<li>{item.text}</li>)})}\n        </ul>\n        <div class=\"status-event-title\">Changed</div>\n        <ul>\n          {version.changed.map((item) => { return (<li>{item.text}</li>)})}\n        </ul>\n        <div class=\"status-event-title\">Fixed</div>\n        <ul>\n          {version.fixed.map((item) => { return (<li>{item.text}</li>)})}\n        </ul>\n      </div>\n    </div>\n  }\n\n}\n"],"mappings":"kDAAA,MAAMA,EAAkB,60C,MCOXC,EAAY,M,2CA4BK,wB,cAEH,K,UAKF,G,YAEA,I,CAEvBC,0BACE,MAAMC,QAAiBC,MAAMC,KAAKC,cAClCD,KAAKE,eAAiBJ,EAASK,OAC/BC,QAAQC,MAAM,WAAYL,KAAKE,S,CAEjCI,S,MACE,IAAIC,EAAa,IAAIC,KAAKC,eAAe,KAAM,CAAEC,KAAM,UAAWC,MAAO,OAAQC,IAAK,YAEtF,OACEC,EAACC,EAAI,KACHD,EAAA,aACAA,EAAA,OAAKE,GAAG,wBACLC,EAAAhB,KAAKE,YAAQ,MAAAc,SAAA,SAAAA,EAAEd,SAASe,KAAKC,IAC5B,IAAIC,EAAY,IAAIC,KAAKF,EAAQG,WACjC,IAAIT,EAAML,EAAWe,OAAOH,GAE5B,OAAOnB,KAAKuB,cAAcX,EAAKM,EAAQ,K,CAOjDK,cAAcX,EAAKM,GAEjB,OAAOL,EAAA,OAAKW,MAAM,cAChBX,EAAA,OAAKW,MAAM,QAAQZ,GACnBC,EAAA,WACAA,EAAA,OAAKW,MAAM,gBACTX,EAAA,OAAKW,MAAM,sBAAoB,SAC/BX,EAAA,UACGK,EAAQO,MAAMR,KAAKS,GAAmBb,EAAA,UAAKa,EAAKC,SAEnDd,EAAA,OAAKW,MAAM,sBAAoB,WAC/BX,EAAA,UACGK,EAAQU,QAAQX,KAAKS,GAAmBb,EAAA,UAAKa,EAAKC,SAErDd,EAAA,OAAKW,MAAM,sBAAoB,SAC/BX,EAAA,UACGK,EAAQW,MAAMZ,KAAKS,GAAmBb,EAAA,UAAKa,EAAKC,U"}